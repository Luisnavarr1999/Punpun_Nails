<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Dashboard | Nini Atelier</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="assets/css/admin.css" />
</head>

<body>
  <!-- Header -->
  <div class="admin-header">
    <div class="admin-header-content">
      <div>
        <h1 class="admin-title">
          <i class="bi bi-speedometer2"></i> Dashboard Admin
        </h1>
        <p class="admin-subtitle">Gestiona tu cat치logo de Press On</p>
      </div>
      <button class="btn btn-outline-danger" id="logoutBtn">
        <i class="bi bi-box-arrow-right me-2"></i>Cerrar Sesi칩n
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <div class="admin-container">
    <!-- Sidebar -->
    <div class="admin-sidebar">
      <div class="sidebar-menu">
        <button class="menu-item active" data-tab="products">
          <i class="bi bi-grid-3x3-gap"></i> Productos
        </button>
        <button class="menu-item" data-tab="add">
          <i class="bi bi-plus-circle"></i> Agregar Producto
        </button>
        <button class="menu-item" data-tab="settings">
          <i class="bi bi-gear"></i> Configuraci칩n
        </button>
      </div>
    </div>

    <!-- Main Panel -->
    <div class="admin-main">
      <!-- Tab: Productos -->
      <div class="tab-content active" id="products-tab">
        <div class="tab-header">
          <div>
            <h2>Mis Productos</h2>
            <div class="product-count">Total: <strong id="productCount">0</strong></div>
          </div>
        </div>

        <div class="search-container" style="margin-bottom: 20px;">
          <input 
            type="text" 
            id="searchProducts" 
            placeholder="游댌 Buscar por nombre o ID (Ref)..."
            class="form-control search-input"
            style="max-width: 400px;"
          >
        </div>

        <div class="products-grid" id="productsGrid">
          <!-- Los productos se cargan aqu칤 -->
        </div>

        <div class="empty-state" id="emptyState" style="display: none;">
          <i class="bi bi-inbox"></i>
          <p>No hay productos a칰n</p>
          <button class="btn btn-pink" onclick="switchTab('add')">
            <i class="bi bi-plus me-2"></i>Agregar el primero
          </button>
        </div>
      </div>

      <!-- Tab: Agregar Producto -->
      <div class="tab-content" id="add-tab">
        <div class="tab-header">
          <h2>Agregar Nuevo Producto</h2>
        </div>

        <div class="form-container">
          <form id="addProductForm">
            <div class="form-group">
              <label for="productName">Nombre del Producto *</label>
              <input 
                type="text" 
                id="productName" 
                name="productName"
                placeholder="ej: Press On Cl치sico"
              >
            </div>

            <div class="form-group">
              <label for="productDescription">Descripci칩n *</label>
              <textarea 
                id="productDescription" 
                name="productDescription"
                placeholder="ej: Set elegante con dise침o cl치sico y acabado brillante. Duraci칩n: 2-3 semanas."
                rows="4"
              ></textarea>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="productPrice">Precio *</label>
                <input 
                  type="text" 
                  id="productPrice" 
                  name="productPrice"
                  placeholder="ej: 25.000"
                  autocomplete="off"
                >
              </div>

              <div class="form-group">
                <label for="productAvailable">Estado</label>
                <select id="productAvailable" name="productAvailable">
                  <option value="true">Disponible</option>
                  <option value="false">Agotado</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="productImage">Imagen del Producto *</label>
              <div class="image-upload-container">
                <input 
                  type="file" 
                  id="productImage" 
                  name="productImage"
                  accept="image/*"
                  style="display: none;"
                >
                <label for="productImage" class="image-upload-btn">
                  <i class="bi bi-cloud-upload me-2"></i>Seleccionar Imagen
                </label>
                <small>PNG, JPG, JPEG. M치x 5MB</small>
                <div class="image-preview" id="imagePreview" style="display: none; margin-top: 12px;">
                  <img id="previewImageUpload" src="" alt="Preview" style="max-width: 200px; border-radius: 8px;">
                </div>
              </div>
            </div>

            <div class="form-preview">
              <h4>Vista Previa</h4>
              <div class="preview-item" id="preview">
                <div class="preview-image">
                  <img id="previewImg" src="" alt="Preview" style="display: none;">
                  <div class="preview-placeholder">Sin imagen</div>
                </div>
                <div class="preview-info">
                  <h5 id="previewName">Nombre</h5>
                  <p id="previewDesc">Descripci칩n</p>
                  <div class="preview-bottom">
                    <span id="previewPrice">$0</span>
                    <span id="previewStatus" class="badge">Disponible</span>
                  </div>
                </div>
              </div>
            </div>

            <button type="submit" class="btn btn-pink btn-lg w-100">
              <i class="bi bi-plus-circle me-2"></i>Agregar Producto
            </button>
          </form>
        </div>
      </div>

      <!-- Tab: Configuraci칩n -->
      <div class="tab-content" id="settings-tab">
        <div class="tab-header">
          <h2>Configuraci칩n</h2>
        </div>

        <div class="settings-container">
          <div class="setting-card">
            <h4><i class="bi bi-key"></i> Cambiar Contrase침a</h4>
            <form id="passwordForm">
              <div class="form-group">
                <label for="newPassword">Nueva Contrase침a</label>
                <input 
                  type="password" 
                  id="newPassword" 
                  placeholder="Ingresa la nueva contrase침a"
                >
              </div>
              <button type="submit" class="btn btn-primary">Actualizar</button>
            </form>
          </div>

          <div class="setting-card">
            <h4><i class="bi bi-megaphone"></i> News Ticker</h4>
            <form id="announcementForm">
              <div class="form-group">
                <label for="announcementActive">Estado</label>
                <select id="announcementActive">
                  <option value="true">Activo</option>
                  <option value="false">Inactivo</option>
                </select>
              </div>

              <div class="form-group">
                <label for="announcementText">Texto principal</label>
                <input 
                  type="text" 
                  id="announcementText" 
                  placeholder="Ej: Agenda abierta para esta semana 游눈"
                >
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="announcementSpeed">Velocidad (segundos)</label>
                  <input 
                    type="number" 
                    id="announcementSpeed" 
                    min="5" 
                    step="1" 
                    placeholder="18"
                  >
                </div>
                <div class="form-group">
                  <label for="announcementLink">Link opcional</label>
                  <input 
                    type="url" 
                    id="announcementLink" 
                    placeholder="https://..."
                  >
                </div>
              </div>

              <button type="submit" class="btn btn-primary">Guardar cambios</button>
            </form>
          </div>

          <div class="setting-card danger-zone">
            <h4><i class="bi bi-exclamation-triangle"></i> Zona de Peligro</h4>
            <p>Elimina todos los productos (esto no se puede deshacer)</p>
            <button class="btn btn-danger" onclick="clearAllProducts()">
              <i class="bi bi-trash me-2"></i>Eliminar Todo
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Edici칩n -->
  <div class="modal" id="editModal">
    <div class="modal-overlay" onclick="closeEditModal()"></div>
    <div class="modal-content">
      <button class="modal-close" onclick="closeEditModal()">
        <i class="bi bi-x-lg"></i>
      </button>
      <h3>Editar Producto</h3>
      
      <form id="editProductForm">
        <div class="form-group">
          <label for="editProductName">Nombre</label>
          <input type="text" id="editProductName" required>
        </div>

        <div class="form-group">
          <label for="editProductDescription">Descripci칩n</label>
          <textarea id="editProductDescription" rows="3" required></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="editProductPrice">Precio</label>
            <input type="text" id="editProductPrice" autocomplete="off">
          </div>

          <div class="form-group">
            <label for="editProductAvailable">Estado</label>
            <select id="editProductAvailable">
              <option value="true">Disponible</option>
              <option value="false">Agotado</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label for="editProductImage">Imagen del Producto</label>
          <div class="image-upload-container">
            <input 
              type="file" 
              id="editProductImage" 
              accept="image/*"
              style="display: none;"
            >
            <label for="editProductImage" class="image-upload-btn">
              <i class="bi bi-cloud-upload me-2"></i>Seleccionar Imagen
            </label>
            <small>PNG, JPG, JPEG. M치x 5MB</small>
            <div class="image-preview" id="editImagePreview" style="display: none; margin-top: 12px;">
              <img id="editPreviewImage" src="" alt="Preview" style="max-width: 200px; border-radius: 8px;">
            </div>
          </div>
        </div>

        <div class="modal-buttons">
          <button type="button" class="btn btn-secondary" onclick="closeEditModal()">Cancelar</button>
          <button type="submit" class="btn btn-pink">Guardar Cambios</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Admin JS -->
  <script src="assets/js/admin.js"></script>
</body>

</html>
